(this.webpackJsonpminiproject=this.webpackJsonpminiproject||[]).push([[0],{254:function(e,t,n){},271:function(e,t){},274:function(e,t){},277:function(e,t){},281:function(e,t){},282:function(e,t){},307:function(e,t){},309:function(e,t){},323:function(e,t){},325:function(e,t){},339:function(e,t){},355:function(e,t){},357:function(e,t){},371:function(e,t){},372:function(e,t){},445:function(e,t){},446:function(e,t){},549:function(e,t,n){},748:function(e,t,n){"use strict";n.r(t);var a=n(7),s=n.n(a),o=n(241),c=n.n(o),i=(n(254),n(63)),r=n(18),l=n(0),u=n(2),d=n(4),p=n(5),h=n(38),b=n(14),m=n(15),j=n(74),f=n.n(j),g="0xb343c0aFbD16e0bA00F1EAA05DbF5c5B59EE2438",v=[{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"comTxt",type:"string"}],name:"addComment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"postTxt",type:"string"},{internalType:"string",name:"postImg",type:"string"}],name:"addPost",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"int8",name:"c",type:"int8"}],name:"changeLike",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"poster",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"postTxt",type:"string"},{indexed:!1,internalType:"string",name:"postImg",type:"string"}],name:"postCreated",type:"event"},{inputs:[],name:"countPosts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getPost",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"address",name:"",type:"address"},{internalType:"int8",name:"",type:"int8"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],x=n(147),y=(n(549),n(550),n(6));n(239).config(),console.log("i am here");var w=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={account:"",posts:[],comments:{},socialdapp:null,loading:!0,values:{},cvalues:{},x:"",i:0,cid:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleCha=a.handleCha.bind(Object(h.a)(a)),a.handleSub=a.handleSub.bind(Object(h.a)(a)),a.captureFile=a.captureFile.bind(Object(h.a)(a)),a}return Object(p.a)(n,[{key:"componentWillMount",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWeb3();case 2:return e.next=4,this.loadBlockchainData();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeFiles",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.Buffer,n=new Blob([t],{type:"image/png"}),a=new x.a({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDgzNjZEOTA3RjJmNmM2M0E5MmRjZWQ3RkIyQTk1YzAyMkQyMEMzNTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTk0Mzk0NzU4MzUsIm5hbWUiOiJkZW1vIn0.Gh2SuGzQxJ50q8MvkSpZzF7R_TF4k1gsEKOsBmlFuR4"}),e.next=5,a.put([new File([n],"image.png")]);case 5:s=e.sent,console.log(s),s+=".ipfs.w3s.link/image.png",console.log(s),this.addPost(this.state.values.text,s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=6;break}return window.web3=new f.a(window.ethereum),e.next=4,window.ethereum.enable();case 4:e.next=7;break;case 6:window.web3?window.web3=new f.a(window.web3.currentProvider):window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlockchainData",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,s,o,c,i,r,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.web3,e.next=3,t.eth.getAccounts();case 3:return n=e.sent,this.setState({account:n[0]}),e.next=7,t.eth.net.getId();case 7:if(5!==e.sent){e.next=39;break}return a=new t.eth.Contract(v,g),this.setState({socialdapp:a}),e.next=13,a.methods.countPosts().call();case 13:s=e.sent,this.setState({postsCount:s}),console.log(s),console.log(a.methods),o=[],c=0;case 19:if(!(c<s)){e.next=35;break}return e.next=22,a.methods.getPost(c).call();case 22:for(i=e.sent,console.log(i),{},r=[],u=0;u<i[4].length;u++)(d=[])[0]=i[4][u],d[1]=i[5][u],r.push(d);i[6]=r,i[7]=c,console.log(i),o.push(i),console.log(i[6]);case 32:c++,e.next=19;break;case 35:this.setState({posts:o}),console.log(o),e.next=40;break;case 39:window.alert("Decentragram contract not deployed to detected network.");case 40:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPost",value:function(e,t){if(console.log(e),0==e.localeCompare("")&&(e="none"),0==t.localeCompare(""));console.log("indifefeafa"),console.log(e,t),console.log(this.state.socialdapp),this.state.socialdapp.methods.addPost(e,t).send({from:this.state.account}).on("transactionHash",(function(e){console.log(e)}))}},{key:"addComment",value:function(e,t){console.log("commentsinside"),this.state.socialdapp.methods.addComment(parseInt(e),t).send({from:this.state.account}).on("transactionHash",(function(e){console.log(e)}))}},{key:"captureFile",value:function(e){var t=this;e.preventDefault();var n=e.target.files[0];console.log(e.target.files),console.log(e.target.files[0]);var a=new window.FileReader;a.readAsArrayBuffer(n),a.onloadend=function(){console.log("pp"),console.log(a.result),t.setState({Buffer:a.result})},console.log(this.state.Buffer)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;console.log(a),this.setState((function(e){var t=e.values;return t[n]=a,{values:t}})),console.log(this.state.values.image),console.log(this.state.values)}},{key:"handleCha",value:function(e,t){console.log("insdie"),console.log(e,t.target.value);var n=t.target.value;this.setState((function(t){var a=t.cvalues;return a[e]=n,{cvalues:a}})),console.log(this.state.cvalues)}},{key:"handleSub",value:function(e){var t=Object.keys(this.state.cvalues),n=t[0];0==this.state.cvalues[t].localeCompare("")?alert("empty comment"):(console.log("here"),this.addComment(n,this.state.cvalues[n])),console.log("fck u jalapati"),console.log(this.state.cvalues),e.preventDefault()}},{key:"handleSubmit",value:function(e){0==this.state.values.text.localeCompare("")?alert("empty post"):(console.log("h"),console.log(this.state.Buffer),void 0!=this.state.Buffer?(console.log("herer"),this.storeFiles()):(console.log(this.state.values.image),console.log("sahdadadada"),this.addPost(this.state.values.text,"")),e.preventDefault())}},{key:"newComment",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:prompt("What is the comment ?");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"container home pt-3 ml-5",style:{height:"100vh"},children:[Object(y.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(y.jsxs)("div",{className:"form-group w-75",children:[Object(y.jsxs)("label",{for:"post",children:["post",Object(y.jsx)("textarea",{name:"text",className:"form-control w-100",id:"post",rows:"2",onChange:this.handleChange})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{for:"post",children:Object(y.jsx)("input",{type:"file",name:"image",accept:".png, .jpg, .jpeg",onChange:this.captureFile})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary mb-2",children:"add Post"})]}),this.state.posts.map((function(t){return Object(y.jsxs)("div",{className:"card mt-5 w-100 shadow-lg",children:[Object(y.jsx)("div",{className:"card-header bg-light text-success",children:t[2]}),Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsx)("p",{children:t[0]}),-1!=t[1].indexOf(".ipfs.w3s.link/image.png")&&Object(y.jsx)("div",{class:"embed-responsive embed-responsive-21by9",children:Object(y.jsx)("img",{src:"https://"+t[1],alt:"",style:{height:"800px",width:"800px"}})})]}),Object(y.jsxs)("div",{className:"card-footer",children:[Object(y.jsx)("p",{className:"fst-italic",children:"comments"}),t[6].map((function(e){return Object(y.jsxs)("div",{className:"card mt-3 w-100",children:[Object(y.jsx)("div",{className:"card-header bg-light text-success",children:e[1]}),Object(y.jsx)("div",{className:"card-body",children:Object(y.jsx)("p",{children:e[0]})})]})})),Object(y.jsx)("div",{children:Object(y.jsxs)("form",{onSubmit:e.handleSub,children:[Object(y.jsx)("div",{className:"form-group w-75",children:Object(y.jsxs)("label",{for:"post",children:["comment:",Object(y.jsx)("input",{type:"text",className:"form-control w-100",onChange:e.handleCha.bind(e,t[7])})]})}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary mb-2 mt-3",children:"add comment"})]})})]})]})}))]})}}]),n}(a.Component),O=w,k=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={account:"",posts:[],loading:!0},a}return Object(p.a)(n,[{key:"componentWillMount",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWeb3();case 2:return e.next=4,this.loadBlockchainData();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=6;break}return window.web3=new f.a(window.ethereum),e.next=4,window.ethereum.enable();case 4:e.next=7;break;case 6:window.web3?(console.log(window.web3.currentProvider),window.web3=new f.a(window.web3.currentProvider)):window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlockchainData",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,s,o,c,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.web3,e.next=3,t.eth.getAccounts();case 3:return n=e.sent,console.log(n),this.setState({account:n[0]}),e.next=8,t.eth.net.getId();case 8:if(5!==e.sent){e.next=34;break}return a=new t.eth.Contract(v,g),this.setState({socialdapp:a}),e.next=14,a.methods.countPosts().call();case 14:s=e.sent,this.setState({postsCount:s}),console.log(s),console.log(a.methods),o=[],c=0;case 20:if(!(c<s)){e.next=30;break}return e.next=23,a.methods.getPost(c).call();case 23:i=e.sent,console.log(i),console.log(i[2],this.state.account),i[2]==this.state.account&&o.push(i);case 27:c++,e.next=20;break;case 30:this.setState({posts:o}),console.log(o),e.next=35;break;case 34:window.alert("Decentragram contract not deployed to detected network.");case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"container text-left home pt-3",style:{height:"100vh"},children:[this.state.posts.length>0&&this.state.posts.map((function(e){return Object(y.jsxs)("div",{className:"card mt-5 w-100 shadow-lg",children:[Object(y.jsx)("div",{className:"card-header text-success",children:e[2]}),Object(y.jsx)("div",{className:"card-body",children:Object(y.jsx)("p",{children:e[0]})})]})})),0==this.state.posts.length&&Object(y.jsx)("h5",{children:"no posts found"})]})}}]),n}(a.Component),N=k,C=(n.p,n.p+"static/media/socialDapp.a378ebf8.png");n(239).config(),console.log();var T=function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark text-white",children:Object(y.jsxs)("div",{className:"container-fluid",children:[Object(y.jsx)("img",{src:C,width:"30px"}),Object(y.jsx)("a",{className:"navbar-brand",to:"#",children:"Social Dapp"}),Object(y.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(y.jsx)("span",{className:"navbar-toggler-icon"})}),Object(y.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(y.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(y.jsx)("li",{className:"nav-item active",children:Object(y.jsx)(i.b,{className:"nav-link",to:"home",children:"Home"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(i.b,{className:"nav-link",to:"profile",children:"Profile"})})]})})]})}),Object(y.jsxs)(r.d,{children:[Object(y.jsx)(r.b,{path:"/",element:Object(y.jsx)(r.a,{replace:!0,to:"home"})}),Object(y.jsx)(r.b,{path:"/home",element:Object(y.jsx)(O,{})}),Object(y.jsx)(r.b,{path:"/profile",element:Object(y.jsx)(N,{})})]})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,753)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};n(747);c.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(i.a,{children:Object(y.jsx)(T,{})})})),S()}},[[748,1,2]]]);
//# sourceMappingURL=main.a7ee7a2e.chunk.js.map